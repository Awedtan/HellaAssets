name: Modify PR assets

on:
  pull_request:
    types: [ labeled ]

jobs:
  run:
    if: ${{ github.event.label.name == 'update' }}
    runs-on: windows-2019

    steps:
    - uses: actions/checkout@v4
    - name: Download ArkUnpacker
      shell: pwsh
      run: Invoke-WebRequest -Uri "https://github.com/isHarryh/Ark-Unpacker/releases/download/v3.2.0/ArkUnpacker-v3.2.0.exe" -OutFile ArkUnpacker.exe
    - name: Operator spine transparency
      shell: pwsh
      run: .\ArkUnpacker.exe -m "cb" -i "spine/operator" -o "combined/operator"
    - name: Commit changes
      shell: pwsh
      run: |
        git config user.name "github-actions[bot]"
        git config user.email "41898282+github-actions[bot]@users.noreply.github.com"
        git add .
        git commit -m "Operator spine transparency"
        git push
